/* ===== Reset & Base ===== */
*{box-sizing:border-box}
html,body{margin:0;padding:0;height:100%}
body{
  font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif;
  background:#22293B; color:#F4F7FB;
  background-image: radial-gradient(120% 80% at 70% 10%, rgba(166,216,255,.14), rgba(34,41,59,1));
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
img{max-width:100%;display:block}
a{color:inherit;text-decoration:none}
:root{
  --text:#F4F7FB; --muted:#C9D3EA;
  --panel:rgba(255,255,255,.08); --border:rgba(255,255,255,.18);
  --amber:#FFD29B; --aur1:#A6D8FF; --aur2:#D8C2FF; --aur3:#8BFFC1;
}

/* ===== Layout ===== */
.container{max-width:980px;margin:0 auto;padding:18px 14px 80px}
.card{background:var(--panel);border:1px solid var(--border);border-radius:16px;padding:16px 16px 12px}
.hero{padding:18px 14px 6px;text-align:center}
.hero h1{margin:0 0 6px;font-size:28px}
.muted{color:var(--muted)}
.small{font-size:12px;opacity:.85}
.center{text-align:center}
.footer{padding:16px;text-align:center;color:var(--muted);opacity:.9}

/* ===== Form ===== */
label{display:block;margin:10px 0}
input,select,textarea{
  width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--border);
  background:#0F1524;color:var(--text);outline:none
}
textarea{min-height:92px}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
@media(max-width:860px){ .grid{grid-template-columns:1fr} }

.kv{display:grid;grid-template-columns:1fr 1fr;gap:10px}

/* ===== Buttons ===== */
button{cursor:pointer;border:0;border-radius:12px;padding:10px 14px;background:#2B2F45;color:#fff}
button.primary,#start,#startPlay{
  background:linear-gradient(135deg,var(--amber),var(--aur2));
  color:#1b1f2a;border:0
}
button.secondary{background:#2B2F45;color:#fff}

/* ===== Hint Overlay ===== */
.hint-overlay{position:fixed;inset:0;background:rgba(0,0,0,.55);display:flex;align-items:center;justify-content:center;z-index:9999}
.hint-card{background:#0f1117;border:1px solid #2a3042;border-radius:16px;padding:16px;max-width:420px;color:#eaeef5;text-align:center}
.hint-title{font-size:18px;margin:2px 0 6px}
.hint-text{font-size:14px;color:#aab3cf;margin-bottom:10px}
.hint-row{display:flex;gap:10px;justify-content:center;margin-bottom:10px;flex-wrap:wrap}

/* ===== Stage ===== */
.scene{position:relative;min-height:76vh;border-radius:14px;overflow:hidden;}

/* Starfield */
.starfield{background:radial-gradient(120% 80% at 50% 10%, rgba(124,232,255,.05), transparent)}
.star{
  position:absolute;width:2px;height:2px;border-radius:50%;
  background:radial-gradient(circle, #fff, rgba(255,255,255,.1));
  opacity:var(--o,0.7); animation:twinkle 2.2s infinite ease-in-out, drift var(--spd,60s) linear infinite
}
@keyframes twinkle{0%,100%{transform:scale(1)}50%{transform:scale(1.6)}}
@keyframes drift{from{transform:translateX(0)}to{transform:translateX(-18vw)}}

/* Neon Aurora */
.neon{
  background:radial-gradient(90% 80% at 60% 10%, rgba(168,140,255,.20), transparent),
             radial-gradient(70% 60% at 30% 80%, rgba(140,255,210,.12), transparent);
}
.neon-bar{
  position:absolute;inset:0;background:
  linear-gradient(120deg, rgba(124,232,255,.18), rgba(216,194,255,.22), rgba(139,255,193,.18));
  filter:blur(40px);opacity:.70;animation:shimmer 12s linear infinite
}
@keyframes shimmer{0%{transform:translateX(-15%)}50%{transform:translateX(15%)}100%{transform:translateX(-15%)}}
.ff{
  position:absolute;width:6px;height:6px;border-radius:50%;
  background:radial-gradient(circle, rgba(255,255,200,.95), rgba(255,255,200,.12));
  box-shadow:0 0 10px rgba(255,255,180,.8);
  animation:fly var(--t,12s) ease-in-out infinite alternate
}
@keyframes fly{
  0%{ transform:translate(0,0) }
  100%{ transform:translate(var(--dx,6vw), -8vh) }
}

/* Candles */
.dark-vignette{
  background:radial-gradient(65% 40% at 50% 90%, rgba(255,210,155,.12), transparent),
             radial-gradient(100% 80% at 50% 10%, rgba(166,216,255,.06), transparent);
}
.dark-vignette:after{
  content:""; position:absolute; inset:auto 0 0 0; height:38%;
  background: radial-gradient(60% 40% at 50% 90%, rgba(255,210,155,.18), transparent 70%);
  pointer-events:none; z-index:1;
}
.flame{
  position:absolute;width:14px;height:22px;border-radius:50% 50% 40% 40%;
  background:radial-gradient(ellipse at 50% 60%, rgba(255,240,180,.95) 0%, rgba(255,180,80,.8) 45%, rgba(255,120,40,.55) 75%, rgba(0,0,0,0) 80%);
  filter:blur(0.6px);mix-blend-mode:screen;animation:flicker 1.6s infinite ease-in-out
}
@keyframes flicker{0%{transform:translateY(0) scale(1)}50%{transform:translateY(-2px) scale(1.05)}100%{transform:translateY(0) scale(1)}}

/* Stage HUD */
.badge{position:absolute;left:12px;top:12px;background:rgba(0,0,0,.35);padding:8px 10px;border-radius:10px;backdrop-filter:blur(6px);z-index:3}
.countdown{position:absolute;right:12px;top:12px;background:rgba(0,0,0,.35);padding:8px 10px;border-radius:10px;z-index:3}
.marquee{position:absolute;left:12px;right:12px;bottom:94px;text-align:center;font-size:14px;color:var(--muted);z-index:2;pointer-events:none}

/* Actions bar with safe-area */
.actions{
  position:fixed;left:12px;right:12px;
  bottom:max(12px,env(safe-area-inset-bottom));
  display:flex;flex-wrap:wrap;gap:10px;justify-content:center;z-index:5
}
.actions>button{flex:1 1 160px;min-height:40px;white-space:nowrap}

/* Make sure outer containers don't clip actions */
.card,.container{overflow:visible !important}





